<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Register</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="config.js"></script> <!-- Include the external file -->
</head>
<body>
    <h2>Signup Form</h2>

    <form id="signupForm">
        <input type="text" id="firstname" placeholder="First Name" required><br><br>
        <input type="text" id="lastname" placeholder="Last Name" required><br><br>
        <input type="email" id="email" placeholder="Email" required><br><br>
        <input type="password" id="password" placeholder="Password" required><br><br>
        <select id="role" required>
            <option value="">Select Role</option>
            <option value="user">User</option>
            <option value="admin">Admin</option>
        </select><br><br>
        <button type="submit">Signup</button>
    </form>

    <p id="notification"></p>

    <script>
       

        $(document).ready(function(){
            $("#signupForm").on("submit", function(e){
                e.preventDefault();

                $.ajax({
                    url: API_BASE_URL + "/auth/signup",
                    method: "POST",
                    contentType: "application/json",
                    data: JSON.stringify({
                        firstname: $("#firstname").val(),
                        lastname: $("#lastname").val(),
                        email: $("#email").val(),
                        password: $("#password").val(),
                        role: $("#role").val()
                    }),
                    success: function(res) {
                        $("#notification").css("color", "green")
                                           .text("✅ Signup successful! Token: " + res.token);
                        $("#signupForm")[0].reset();
                    },
                    error: function(err) {
                        $("#notification").css("color", "red")
                                           .text("❌ Failed to sign up: " + (err.responseJSON?.error || "Unknown error"));
                        console.error(err);
                    }
                });
            });
        });
    </script>
</body>
</html>
